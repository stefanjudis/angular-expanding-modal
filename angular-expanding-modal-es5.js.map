{"version":3,"sources":["angular-expanding-modal.js"],"names":[],"mappings":"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","file":"angular-expanding-modal-es5.js","sourcesContent":["/* global angular */\n\n/*\n * @license\n * angular-expanding-modal v1.0.0\n * License: MIT\n */\n\n;( function( window, ng ) {\n  'use strict';\n\n  class ExpandingModal {\n    constructor( $compile, $rootScope, $controller, $q, $http, $templateCache ) {\n      return function( config ) {\n        if ( ! ( ! config.template ^ ! config.templateUrl ) ) {\n          throw new Error('Expected modal to have exacly one of either `template` or `templateUrl`');\n        }\n\n        var template      = config.template,\n            container     = ng.element(config.container || document.body),\n            controller    = config.controller || null,\n            controllerAs  = config.controllerAs,\n            element       = null,\n            target,\n            html,\n            scope;\n\n        if ( config.template ) {\n          html = $q.when( config.template );\n        } else {\n          html = $http.get( config.templateUrl, {\n            cache : $templateCache\n          } ).then( function ( response ) {\n            return response.data;\n          } );\n        }\n\n        function activate( target, locals) {\n          return html.then( function( html ) {\n            if ( ! element ) {\n              attach( html, target, locals );\n            }\n          });\n        }\n\n\n        function attach ( html, targetElem, locals ) {\n          target = targetElem;\n\n          element = ng.element( html );\n          if ( element.length === 0 ) {\n            throw new Error('The template contains no elements; you need to wrap text nodes');\n          }\n          scope = $rootScope.$new();\n          if (controller) {\n            if (!locals) {\n              locals = {};\n            }\n            locals.$scope = scope;\n            var ctrl = $controller(controller, locals);\n            if (controllerAs) {\n              scope[controllerAs] = ctrl;\n            }\n          } else if (locals) {\n            // for (var prop in locals) {\n            //   scope[prop] = locals[prop];\n            // }\n          }\n\n          $compile(element)(scope);\n\n          element[ 0 ].style.opacity = 0;\n\n          container.append( element[ 0 ] );\n\n          var startRect  = target.getBoundingClientRect();\n          var endRect = element[ 0 ].getBoundingClientRect();\n\n          var startValues = {\n            top  : ( startRect.top + window.scrollY ),\n            left : startRect.left,\n\n            height : startRect.height,\n            width  : startRect.width\n          };\n\n          var endValues = {\n            top  : ( endRect.top + window.scrollY ),\n            left : endRect.left,\n\n            height : endRect.height,\n            width  : endRect.width\n          };\n\n          var transformDiff = {\n            x : 0,\n            y : 0\n          };\n\n          var transformStyles = window.getComputedStyle( element[ 0 ], null ).getPropertyValue( 'transform' );\n\n          if ( transformStyles && transformStyles !== 'none' ) {\n            let transformValues = transformStyles.replace( /(matrix\\(|\\))/g, '' ).split( ',' )\n\n            transformDiff.x = +transformValues[ 4 ];\n            transformDiff.y = +transformValues[ 5 ];\n          }\n\n          var scaleX = startValues.width / endValues.width;\n          var scaleY = startValues.height / endValues.height;\n\n          var transformRule = 'translate3d(' +\n                                ( startValues.left - endValues.left + transformDiff.x ) + 'px, ' +\n                                ( startValues.top - endValues.top + transformDiff.y ) + 'px,' +\n                                '0 ) ' +\n                              'scale(' + scaleX + ',' + scaleY + ')';\n\n          var listenerFunc = function listener() {\n            element[ 0 ].classList.remove( 'transitionOut' );\n            element[ 0 ].classList.add( 'done' );\n\n            element[ 0 ].removeEventListener( 'transitionend', listenerFunc );\n          };\n\n          requestAnimationFrame( () => {\n            element[ 0 ].style.transform       = transformRule;\n            element[ 0 ].style.transformOrigin = '0 0'\n            element[ 0 ].style.opacity         = 0.5;\n\n            requestAnimationFrame( () => {\n              element[ 0 ].addEventListener( 'transitionend', listenerFunc, false );\n              element[ 0 ].classList.add( 'transitionOut' );\n              element[ 0 ].style.transformOrigin = '.5 .5'\n              element[ 0 ].style.transform = '';\n              element[ 0 ].style.opacity   = 1;\n\n            } );\n          } );\n        }\n\n        function deactivate () {\n          if (!element) {\n            return $q.when();\n          }\n\n          var startRect = element[ 0 ].getBoundingClientRect();\n          var endRect   = target.getBoundingClientRect();\n\n          var startValues = {\n            top  : startRect.top,\n            left : startRect.left,\n\n            height : startRect.height,\n            width  : startRect.width\n          };\n\n          var endValues = {\n            top  : endRect.top,\n            left : endRect.left,\n\n            height : endRect.height,\n            width  : endRect.width\n          };\n\n          var transformDiff = {\n            x : 0,\n            y : 0\n          };\n\n          var transformStyles = window.getComputedStyle( element[ 0 ], null ).getPropertyValue( 'transform' );\n\n          if ( transformStyles && transformStyles !== 'none' ) {\n            let transformValues = transformStyles.replace( /(matrix\\(|\\))/g, '' ).split( ',' )\n\n            transformDiff.x = +transformValues[ 4 ];\n            transformDiff.y = +transformValues[ 5 ];\n          }\n\n          var transformRule = 'translate3d(' +\n                              ( endValues.left - startValues.left + transformDiff.x ) + 'px , ' +\n                              ( endValues.top - startValues.top +  transformDiff.y ) + 'px,' +\n                              '0 )' +\n                            'scale(' +\n                              ( endValues.width / startValues.width ) + ',' +\n                              ( endValues.height / startValues.height ) + ')';\n\n          element[ 0 ].style.opacity   = 1;\n\n          var listenerFunc = function listener() {\n            element[ 0 ].classList.remove( 'transitionIn' );\n            element[ 0 ].classList.add( 'done' );\n            element[ 0 ].style.opacity   = 0;\n\n            element[ 0 ].removeEventListener( 'transitionend', listenerFunc, false );\n\n            scope.$destroy();\n            scope = null;\n            element.remove();\n            element = null;\n          };\n\n          requestAnimationFrame( () => {\n            element[ 0 ].classList.add( 'transitionIn' );\n            element[ 0 ].classList.remove( 'done' );\n            element[ 0 ].style.transform = transformRule;\n            element[ 0 ].style.opacity   = 0;\n\n            element[ 0 ].addEventListener( 'transitionend', listenerFunc, false );\n          } );\n        }\n\n        function active () {\n          return !!element;\n        }\n\n        return {\n          activate: activate,\n          deactivate: deactivate,\n          active: active\n        };\n      }\n    }\n  }\n\n  ng.module( 'sj.expandingModal', [] )\n      .service( 'ExpandingModal', [ '$compile', '$rootScope', '$controller', '$q', '$http', '$templateCache', ExpandingModal ] );\n} )( window, window.angular );\n"]}